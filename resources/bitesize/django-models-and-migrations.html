<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../assets/css/bitesize/django-models-and-migrations.css">
    <title>Django Models and Migrations</title>
</head>
<body>
    <nav>
        <a href="../../bitesize.html">Bitesize</a>
        <a href="../../checklist.html">Checklists</a>
        <a href="../../flashcards.html">Flash</a>
    </nav>
    <section id="template-body" class="box-shadow">
        <div id="header">
            <div id="header-text">
                <h1 class="text-heading">Django Models and Migrations</h1>
                <span class="alt-text">
                    (explained)
                </span>
            </div>
            <hr id="header-hr" />
        </div>
        <div class="body">
            <div>
                <p>If you've created a Django project, you'll likely have created models to define your data. Django models are what's known as an abstraction. They let you define an SQL database structure without ever having to write any SQL.</p>
            </div>
            <div class="section-margin">
                <p>This allows you to define your database structure using straightforward Python code. Additionally, it allows your data and database definitions to be database agnostic. In other words, Django will translate your models into the correct SQL syntax for any SQL compliant database you want to use - you can change your entire database backend from SQLite to PostgreSQL by changing one variable and remaking your migrations! Without the abstraction of models, you'd have to remake your entire database.</p>
            </div>
            <div class="section-margin">
                <p>Let's have a look at an example model from Django's documentation:</p>
            </div>
            <div class="section-margin code-block">
                <div class="code-text code-container box-shadow">
                    <div class="code-margin">
                        <span class="orange">from</span> django.db <span class="orange">import</span> models
                    </div>
                    <div class="code-margin">
                        <span>
                            <span class="orange">class</span> <span class="blue">Person</span>(models.<span class="blue">Model</span>):
                        </span>
                    </div>
                    <div class="code-indent">
                        <span>
                            first_name = models.<span class="blue">CharField</span>(max_length=<span class="blue">30</span>)
                        </span>
                        <br>
                        <span>
                            last_name = models.<span class="blue">CharField</span>(max_length=<span class="blue">30</span>)
                        </span>
                    </div>
                </div>
            </div>
            <div class="section-margin">
                <p>This model describes a person, with a first name and a last name. Both first name and last name are character fields with a max length of 30. This is the definition for our data.</p>
            </div>
            <div class="section-margin">
                <p>When you make migrations, Django essentially translates your models into SQL statements which can be applied to your database. When you migrate, the SQL statements are run, and the database gets updated with the new table structures.</p>
            </div>
            <div class="section-margin">
                <p>Running makemigrations on the above person model would result in the following SQL:</p>
            </div>
            <div class="section-margin code-block">
                <div class="code-text code-container box-shadow">
                    <div class="code-margin">
                        <span class="pink">CREATE</span> <span class="blue">TABLE</span> <span class="orange">myapp_person</span> (
                    </div>
                    <div class="code-indent">
                        <span>
                            "id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
                        </span>
                        <br>
                        <span>
                            "first_name" varchar(30) NOT NULL,
                        </span>
                        <br>
                        <span>
                            "last_name" varchar(30) NOT NULL,
                        </span>
                    </div>
                    <div class="code-margin">
                        );
                    </div>
                </div>
            </div>
            <div class="section-margin center-section">
                <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/alert_icon_red.svg" alt="Red Alert Icon">
                <span>Note that Django automatically adds a primary key id to all models.</span>
            </div>
            <div class="section-margin">
                <p class="section-padding">And that's it!</p>
                <p>Models are an abstract way of creating a database structure for your project. This decoupling of structure and implementation has the benefits of developers not having to interact directly with a SQL database language, being easily able to change their database if required, and being easily able to export and migrate their data if needed.</p>
            </div>
        </div>
        <div id="footer-icon">
            <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/library-logo-dark.png" alt="Code Institute logo">
        </div>
    </section>
</body>
</html>


