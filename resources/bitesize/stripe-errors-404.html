<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../assets/css/bitesize/stripe-errors.css">
    <title>Stripe Errors 404</title>
</head>
<body>
    <nav>
        <a href="../../bitesize.html">Bitesize</a>
        <a href="../../checklist.html">Checklists</a>
        <a href="../../flashcards.html">Flash</a>
    </nav>
    <section id="template-body" class="box-shadow">
        <div id="header">
            <div id="header-text">
                <h1 class="text-heading">Stripe Errors</h1>
                <span class="alt-text">
                    404 error - check your endpoint!
                </span>
            </div>
            <hr id="header-hr" />
        </div>
        <div class="body">
            <div>
                <p class="section-padding">Failing to set up your endpoint URL correctly is a common reason for webhooks not getting sent. Each server address that needs to use webhooks will require a unique endpoint. They can be added and deleted as needed - sometimes deleting and creating a new endpoint is a useful exercise if debugging a persistent problem.</p>
                <p class="section-padding">Compare the terminal snippets below:</p>
                <p class="section-padding">With an incorrect endpoint URL, the webhook path is not accessed:</p>
                <div class="code-block">
                    <div class="code-text code-container box-shadow">
                        <div class="code-margin">
                            <span>
                                “GET /checkout/ HTTP/1.1” 200 30264
                            </span><br>
                            <span>
                                “POST /checkout/cache_checkout_data/ HTTP/1.1” 200 0
                            </span><br>
                            <span>
                                “POST /checkout/ HTTP/1.1” 302 0
                            </span><br>
                            <span>
                                “GET /checkout/checkout_success/F011223344/ HTTP/1.1” 200 16345
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="section-margin">
                <p class="section-padding">With the endpoint URL correctly set up, the checkout webhook path is accessed:</p>
                <div class="code-block">
                    <div class="code-text code-container box-shadow">
                        <div class="code-margin">
                            <span>
                                “GET /checkout/ HTTP/1.1” 200 30264
                            </span><br>
                            <span class="orange">
                                “POST /checkout/wh/ HTTP/1.1” 200 50
                            </span><br>
                            <span>
                                “POST /checkout/cache_checkout_data/ HTTP/1.1” 200 0
                            </span><br>
                            <span>
                                “POST /checkout/ HTTP/1.1” 302 0
                            </span><br>
                            <span>
                                “GET /checkout/checkout_success/F011223344/ HTTP/1.1” 200 16345
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="section-margin">
                <p class="section-padding">
                    From the <a href="https://dashboard.stripe.com/test/webhooks" target="_blank" rel="noopener noreferrer" class="red">Stripe Test Webhooks Dashboard</a> check that the endpoint you are working with has the correct format:
                </p>
            </div>
            <div class="section-margin">
                <p class="alt-text">For the Local server:</p>
            </div>
            <div class="section-margin">
                <div class="code-block">
                    <div class="code-text code-container box-shadow">
                        <div class="code-margin">
                            <span>
                                <span class="orange">https://8000</span>-blue-kiwi-tqdak6zi.ws-<span class="orange">eu67</span>.gitpod.io<span class="orange">/checkout/wh/</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="section-m info-block">
                <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/alert_icon_red.svg" alt="red alert icon in a circle"/>
                <p>Pay special attention to the three parts of the endpoint highlighted above. Without getting these correct for your local URL, your endpoint will not be found when your webhook tries to reach it!</p>
            </div>
            <div class="section-margin">
                <p class="alt-text">For the Deployed server:</p>
            </div>
            <div class="section-margin">
                <div class="code-block">
                    <div class="code-text code-container box-shadow">
                        <div class="code-margin">
                            <span>
                                https://YOUR-APP-NAME.herokuapp.com/checkout/wh/
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="footer-icon">
            <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/library-logo-dark.png" alt="Code Institute logo">
        </div>
    </section>
</body>
</html>


