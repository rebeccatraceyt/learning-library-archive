<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../assets/css/bitesize/react-hooks.css" />
    <title>React - Custom Hooks</title>
  </head>
  <body>
    <nav>
      <a href="../../bitesize.html">Bitesize</a>
      <a href="../../checklist.html">Checklists</a>
      <a href="../../flashcards.html">Flash</a>
    </nav>
    <section id="template-body" class="box-shadow">
      <div id="header">
        <div id="header-text">
          <h1 class="text-heading">Creating Custom Hooks in React</h1>
          <p class="section-padding">
            A React hook is a mechanism which allows function-based components to access stateful logic. You can think of writing a custom hook as writing a helper function which contains its own isolated state and effects. Once written, it can be imported and used in any function-based component with the same rules that apply to React’s built-in hooks.

          </p>
          <hr id="header-hr" />
        </div>
      </div>
      <div class="body">
        <div class="section-margin idea-section">
          <div class="idea-img">
              <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/lightbulb_red.svg" alt="Orange lightbulb icon tilted left">
              
          </div>
          <div class="idea-text">
              <span>In this card, we will make two custom hooks as examples, and show use cases for each.</span> 
          </div>
      </div>
      <h3>The Setup</h3>
      <p class="section-padding">
        By convention, custom hook names are prepended by the word “use,”  as in <b class="code-text">useState</b> or <b class="code-text">useEffect</b>.
      </p>
      <p class="section-padding">
        They are also usually placed in the<b class="code-text">/src</b> directory in a folder called <b class="code-text">/hooks</b>.
      </p>
      <p class="section-padding">
        Our files will be called:
      </p>
      <div class="section-padding">
      <div class="code-block">
        <div class="code-text code-container box-shadow">
          <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_directory.svg" alt="React directory">
        </div>
      </div>
      </div>
      <div class="section-padding">
      <h3>The useDocumentTitle hook</h3>
      <p class="section-padding">
        This custom hook will accept a string, which will then be set as the document title. This is useful for when you are building an application with more than one page. When the component is dismounted, the original application title will return.
      </p>
      </div>
    
      
        <div class="section-padding circle-points">
          <span class="circle-light">1</span>
          <span>First, we import any react hooks that we need, and export our custom hook for use. The <b class="code-text">useEffect</b> hook replaces React's lifecycle methods for <b class="code-text">componentWillMount</b> and <b class="code-text">componentWillUnmount</b>.
          </span>
        </div>
        <div class="section-padding">
          <div class="code-block">
            <div class="code-text code-container box-shadow">
                <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_step_1.svg" alt="React code block step 1">
            </div>
          </div>
        </div>
        
        <div class="section-padding circle-points">
          <span class="circle-light">2</span>
          <span>Next, we retrieve the original document title and store it. This will allow us to revert back to it when our component unmounts. We need to do this outside of the hook in the main scope.
          </span>
        </div>
        <div class="section-padding">
          <div class="code-block">
            <div class="code-text code-container box-shadow">
                <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_step_2.svg" alt="React code block step 2">
            </div>
          </div>
        </div>
        <div class="section-padding circle-points">
          <span class="circle-light">3</span>
          <span>We can then add the <b class="code-text">useEffect</b> function and its clean-up return function, which gets called when the component unmounts.
          </span>
        </div>
        <div class="section-padding">
          <div class="code-block">
            <div class="code-text code-container box-shadow">
                <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_step_3.svg" alt="React code block step 3">
            </div>
          </div>
        </div>
        <div class="section-padding circle-points">
          <span class="circle-light">4</span>
          <span>The hook will accept the new document title a parameter. We will update the page title in the <b class="code-text">useEffect</b> method when the component is about to mount.
          </span>
        </div>
        <div class="section-padding">
          <div class="code-block">
            <div class="code-text code-container box-shadow">
                <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_step_4.svg" alt="React code block step 4">
            </div>
          </div>
        </div>
        <div class="section-padding circle-points">
          <span class="circle-light">5</span>
          <span>In our clean-up return function, we will set the document title back to the original. This will be called when the component is about to unmount. We only want the <b class="code-text">useEffect</b> hook to run when the title is changed, so we must add the “title” variable to our <b class="code-text">useEffect</b> dependency array.
          </span>
        </div>
        <div class="section-padding">
          <div class="code-block">
            <div class="code-text code-container box-shadow">
                <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_step_5.svg" alt="React code block step 5">
            </div>
          </div>
        </div>
   
      <div class="section-padding circle-points">
        <span class="circle-light">6</span>
        <span>To use our new hook, we simply need to import it into the component we want to use it in, and pass in the a new name for our document title.
        </span>
      </div>
      <div class="section-padding">
        <div class="code-block">
          <div class="code-text code-container box-shadow">
              <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_step_6.svg" alt="React code block step 6">
          </div>
        </div>
      </div>

    <div class="section-padding">
      <div class="section-margin">
      <hr id="divider-hr" />
    </div>
      <h3>The useOnlineStatus hook</h3>
    
      <p class="section-padding">
        This custom hook will return a boolean value indicating whether the current user is online or offline. This could be used to hide a component if the user is not connected to the internet.

      </p>
      </div>
      <div class="section-padding circle-points">
        <span class="circle-light">1</span>
        <span>Again, we will start by importing any react hooks we need and exporting our custom  hook. We need to import <b class="code-text">useState</b> and <b class="code-text">useEffect</b> for this custom hook.
        </span>
      </div>
      <div class="section-padding">
        <div class="code-block">
          <div class="code-text code-container box-shadow">
              <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_online_step_1.svg" alt="React code block step 1">
          </div>
        </div>
      </div>
      

      <div class="section-padding circle-points">
        <span class="circle-light">2</span>
        <span>We will now add two things: our <b class="code-text">useState</b> hook (which contains a variable with a default value of null), and a setter function, which will be used to set the value of the state. This state will hold a boolean value, used to indicate the user's <b class="code-text">onlineStatus</b>. The hook’s return statement will return that boolean value.
        </span>
      </div>
      <div class="section-padding">
        <div class="code-block">
          <div class="code-text code-container box-shadow">
              <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_online_step_2.svg" alt="React code block step 2">
          </div>
        </div>
      </div>
      <div class="section-padding circle-points">
        <span class="circle-light">3</span>
        <span>Next, we add a <b class="code-text">useEffect</b> hook which will run just before the component mounts and set the initial state, based on whether the user is online or offline.
        </span>
      </div>
      <div class="section-padding">
        <div class="code-block">
          <div class="code-text code-container box-shadow">
              <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_online_step_3.svg" alt="React code block step 3">
          </div>
        </div>
      </div>
      <div class="section-padding circle-points">
        <span class="circle-light">4</span>
        <span>We will add a second  hook to handle this. In it, we will add 2 event listeners, one to listen for the user being online, and another to listen for the user going offline. When either of these event listeners fire, update the <b class="code-text">onlineStatus</b> state. When the state changes, it will update the component that the hook is being used in.
          <br>
          <br>
          We now have a problem - what if the user’s online status changes while the component is still mounted? </span>

        </span>
      </div>
      <div class="section-padding">
        <div class="code-block">
          <div class="code-text code-container box-shadow">
              <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_online_step_4.svg" alt="React code block step 4">
          </div>
        </div>
      </div>
      <div class="section-padding circle-points">
        <span class="circle-light">5</span>
        <span>We need to remove any event listeners before the component unmounts. As before, we do this in the <b class="code-text">useEffect</b> clean-up return function.
        </span>
      </div>
      <div class="section-padding">
        <div class="code-block">
          <div class="code-text code-container box-shadow">
              <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_online_step_5.svg" alt="React code block step 5">
          </div>
        </div>
      </div>
 
    <div class="section-padding circle-points">
      <span class="circle-light">6</span>
      <span>Our custom hook is now ready to be used. We can import the hook and assign it to a variable in our component, which will hold a boolean value. We can decide whether we show our component based on that boolean value.
      </span>
    </div>

    <div class="section-padding">
      <div class="code-block">
        <div class="code-text code-container box-shadow">
            <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/react_hooks_online_step_6.svg" alt="React code block step 6">
        </div>
      </div>
    </div>
    <div class="section-margin idea-section">
      <div class="idea-img">
        <img src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/lightbulb_yellow_left.svg" alt="Yellow lightbulb icon tilted left">
          
      </div>
      <div class="idea-text">
          <span>To test it out, try setting yourself offline and back online, and watch the component hide and show based on your network status!</span> 
      </div>
  </div>
    
  </div>

      <div id="footer-icon">
        <img
          src="https://4060571.fs1.hubspotusercontent-na1.net/hubfs/4060571/library-assets/library-logo-dark.png"
          alt="Code Institute logo"
        />
      </div>
    </section>
  </body>
</html>
